<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Short note on reading and writing NC_CHAR and NC_STRING variables · NetCDF.jl</title><link rel="canonical" href="https://juliageo.github.io/NetCDF.jl/strings/"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">NetCDF.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../quickstart/">Quickstart</a></li><li><a class="tocitem" href="../highlevel/">High-level interface</a></li><li><a class="tocitem" href="../intermediate/">Medium-level interface</a></li><li class="is-active"><a class="tocitem" href>Short note on reading and writing <code>NC_CHAR</code> and <code>NC_STRING</code> variables</a><ul class="internal"><li><a class="tocitem" href="#NC_STRING-variables"><span><code>NC_STRING</code> variables</span></a></li><li><a class="tocitem" href="#NC_CHAR-variables"><span><code>NC_CHAR</code> variables</span></a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Short note on reading and writing <code>NC_CHAR</code> and <code>NC_STRING</code> variables</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Short note on reading and writing <code>NC_CHAR</code> and <code>NC_STRING</code> variables</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaGeo/NetCDF.jl/blob/master/docs/src/strings.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Short-note-on-reading-and-writing-NC_CHAR-and-NC_STRING-variables"><a class="docs-heading-anchor" href="#Short-note-on-reading-and-writing-NC_CHAR-and-NC_STRING-variables">Short note on reading and writing <code>NC_CHAR</code> and <code>NC_STRING</code> variables</a><a id="Short-note-on-reading-and-writing-NC_CHAR-and-NC_STRING-variables-1"></a><a class="docs-heading-anchor-permalink" href="#Short-note-on-reading-and-writing-NC_CHAR-and-NC_STRING-variables" title="Permalink"></a></h1><p>There are two common types for storing String data in NetCDF variables. The first is <code>NC_CHAR</code>, where a 1D array of strings is stored in a 2D <code>char**</code> array. Here the user must define the maximum string length and add a respective NetCDF dimension. Since NetCDF4 there is the <code>NC_STRING</code> data type that allows  the direct definition of String variables so that an N-dimensional String array directly maps to an N-dimensional  array in the NetCDF file structure.</p><h2 id="NC_STRING-variables"><a class="docs-heading-anchor" href="#NC_STRING-variables"><code>NC_STRING</code> variables</a><a id="NC_STRING-variables-1"></a><a class="docs-heading-anchor-permalink" href="#NC_STRING-variables" title="Permalink"></a></h2><p>In this package, the Julia type <code>String</code> maps to the <code>NC_STRING</code> datatype, which means that creating a variable with any of</p><pre><code class="language-none">nccreate(filename, varname, dims..., t=String)</code></pre><p>or</p><pre><code class="language-none">NcVar(varname,dims,t=String)</code></pre><p>will result in a NetCDF variable of type <code>NC_STRING</code>. You can directly write an <code>Array{String}</code> of matching shape to these variables. Similarly, calling <code>ncread</code> or <code>NetCDF.readvar</code> on any of these variables will return an <code>Array{String}</code></p><h2 id="NC_CHAR-variables"><a class="docs-heading-anchor" href="#NC_CHAR-variables"><code>NC_CHAR</code> variables</a><a id="NC_CHAR-variables-1"></a><a class="docs-heading-anchor-permalink" href="#NC_CHAR-variables" title="Permalink"></a></h2><p>Dealing with <code>NC_CHAR</code> variables is a bit more complicated because of two reasons. First, the dimensions of the NetCDF variables do not match the dimensions of the resulting string array because of the additional <code>str_len</code> (or similar) axis that is introduced in the NetCDF file. So an n-dimensional String-Array maps to an (n+1)-dimensional <code>NC_CHAR</code> array.</p><p>Second, historically the <code>NC_CHAR</code> type has been used to store compressed data, too. So it is not always desirable to automatically convert these char arrays to strings. Anyhow, here is how you can deal with these variable types:</p><p>Assume you have a NetCDF variable of type <code>NC_CHAR</code> of dimensions (str_len: 10, axis2: 20). Calling <code>x=ncread(...)</code> or <code>x=readvar(...)</code> on this variable will return an <code>Array{ASCIIChar,2}</code> with size <code>(10,20)</code> as it is represented on disk. The <code>ASCIIChar</code> type is a small wrapper around <code>UInt8</code>, needed for dispatch. You can simply convert them to either <code>Char</code> or <code>UInt8</code> using the <code>convert</code> function. The returned array can either be used directly (if it is numeric, you might be able to use <code>reinterpret(UInt8,x)</code>) or convert them to a <code>Vector{String}</code> by calling</p><pre><code class="language-none">y=nc_char2string(x)</code></pre><p>which will return a string vector of length 20.</p><p>An example for creating <code>NC_CHAR</code> and writing variables would be the following:</p><pre><code class="language-none">nccreate(filename,varname,&quot;str_len&quot;,20,&quot;DimValues&quot;,5,t=NC_CHAR)
xs = [&quot;a&quot;,&quot;bb&quot;,&quot;ccc&quot;,&quot;dddd&quot;,&quot;eeeee&quot;]
ncwrite(filename,varname,nc_string2char(xs))</code></pre><p>The call of <code>string2char</code> will convert the <code>Vector{String}</code> to a <code>Matrix{UInt8}</code>. which can be written to the NetCDF file.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../intermediate/">« Medium-level interface</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Friday 3 January 2025 12:49">Friday 3 January 2025</span>. Using Julia version 1.11.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
